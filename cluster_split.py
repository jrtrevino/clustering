def split(distance_dict, threshold, cluster_arr, master):
    dict_list = sorted(distance_dict.items(),
                       key=lambda entry: entry[1], reverse=True)
    first_item = dict_list[0]  # tuple
    distance_dict.pop(first_item[0], None)
    if first_item[1] <= threshold:
        cluster_arr.append(first_item[0])
    else:
        # split the key
        cluster_one = first_item[0][0]
        cluster_two = first_item[0][1]
        if type(cluster_one) is int:
            cluster_arr.append(cluster_one)
        else:
            if master[cluster_one] <= threshold:
                cluster_arr.append(cluster_one)
            else:
                split(distance_dict, threshold, cluster_arr, master)
        if type(cluster_two) is int:
            cluster_arr.append(cluster_two)
        else:
            if master[cluster_two] <= threshold:
                cluster_arr.append(cluster_two)
            else:
                split(distance_dict, threshold, cluster_arr, master)


test = {(19, 21): 0.03214121732666122, (38, 39): 0.045454545454545414, (3, 4): 0.045454545454545525, (1, 2): 0.05081972676135881, (8, 13): 0.05081972676135881, (9, 15): 0.05081972676135881, (11, 18): 0.05081972676135881, (24, 26): 0.05081972676135881, (5, 7): 0.05081972676135886, (14, (11, 18)): 0.05681818181818182, (28, (24, 26)): 0.05681818181818182, (32, 35): 0.06428243465332246, (6, 12): 0.06818181818181812, (34, 37): 0.07186994682200859, (25, 29): 0.0718699468220086, ((3, 4), (1, 2)): 0.07622959014203831, (10, (8, 13)): 0.07954545454545459, (20, (19, 21)): 0.08035304331665312, (36, (34, 37)): 0.08035304331665317, ((28, (24, 26)), (25, 29)): 0.08135125604134294, ((5, 7), (14, (11, 18))): 0.08446629970067326, (((3, 4), (1, 2)), (10, (8, 13))): 0.0940508258934481, ((9, 15), ((5, 7), (14, (11, 18)))): 0.09528698767754784, ((6, 12), (((3, 4), (1, 2)), (10, (8, 13)))): 0.10422691095365984, (23, 27): 0.11363636363636362, ((20, (19, 21)), ((9, 15), ((5, 7), (14, (11, 18))))): 0.11669360453716403, (30, 31): 0.12239010925305682, (33, (30, 31)): 0.061195054626528425, ((32, 35), (33, (30, 31))): 0.11985808585073283, ((
    38, 39), (36, (34, 37))): 0.1298143143044984, (16, 17): 0.1363636363636363, (22, ((28, (24, 26)), (25, 29))): 0.151316749836202, ((23, 27), (22, ((28, (24, 26)), (25, 29)))): 0.2310979578912998, (((32, 35), (33, (30, 31))), ((23, 27), (22, ((28, (24, 26)), (25, 29))))): 0.22110437007244854, (((20, (19, 21)), ((9, 15), ((5, 7), (14, (11, 18))))), (16, 17)): 0.2606340561306874, (((38, 39), (36, (34, 37))), (((32, 35), (33, (30, 31))), ((23, 27), (22, ((28, (24, 26)), (25, 29)))))): 0.2976871248981496, (((6, 12), (((3, 4), (1, 2)), (10, (8, 13)))), (((20, (19, 21)), ((9, 15), ((5, 7), (14, (11, 18))))), (16, 17))): 0.549727493748323, ((((38, 39), (36, (34, 37))), (((32, 35), (33, (30, 31))), ((23, 27), (22, ((28, (24, 26)), (25, 29)))))), (((6, 12), (((3, 4), (1, 2)), (10, (8, 13)))), (((20, (19, 21)), ((9, 15), ((5, 7), (14, (11, 18))))), (16, 17)))): 0.5740126614591345, (0, ((((38, 39), (36, (34, 37))), (((32, 35), (33, (30, 31))), ((23, 27), (22, ((28, (24, 26)), (25, 29)))))), (((6, 12), (((3, 4), (1, 2)), (10, (8, 13)))), (((20, (19, 21)), ((9, 15), ((5, 7), (14, (11, 18))))), (16, 17))))): 0.9003327709912766}

cluster_arr = []
split(test, 0.54, cluster_arr, test.copy())

for cluster in cluster_arr:
    print(len(cluster))
